C51 COMPILER V9.54   MAIN                                                                  05/08/2017 15:45:57 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\softinstall\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h>
   2          #include "delay.h"
   3          #include "int1.h"
   4          #include "direction.h"
   5          #include "avoid.h"
   6          #include "track.h"
   7          #include "uart.h"
   8          #include "time0.h"
   9          #include "time2.h"
  10          #include "radar.h"
  11          
  12          sbit BZ=P0^0;//·äÃùÆ÷
  13          sbit LED=P0^1;
  14          sbit PWML=P2^7;
  15          sbit PWMR=P2^2;
  16          extern unsigned char usart_switch;//´®¿ÚÊý×é½ÓÊÕÍê³É±êÖ¾Î»
  17          extern unsigned char usart_data[4];//´®¿Ú½ÓÊÕÊý×é
  18          extern unsigned int pwmx,pwmy,pwmc;//X¡¢Y¡¢³¬Éù²¨¶æ»úPWM
  19          bit ultrasonic_switch=0;//³¬Éù²¨À×´ï¿ª¹Ø±êÖ¾Î»
  20          unsigned char function=4;//¹¦ÄÜÐòºÅ£º1=ºìÍâ±ÜÕÏ£¬2=Ñ­¼££¬3=³¬Éù²¨±ÚÕÏ£¬4=´®¿Ú¿ØÖÆ
  21          int main(void)
  22          {
  23   1        unsigned char function_last=4;//ÉÏ´ÎÑ¡ÔñµÄ¹¦ÄÜÐòºÅ
  24   1        Init_Int1();//Íâ²¿ÖÐ¶Ï1³õÊ¼»¯
  25   1        Init_Int0();//Íâ²¿ÖÐ¶Ï0³õÊ¼»¯
  26   1        Init_Time0();//¶¨Ê±Æ÷0³õÊ¼»¯
  27   1        Init_Time2();//¶¨Ê±Æ÷2³õÊ¼»¯
  28   1        Init_Uart();
  29   1        LED=0;
  30   1        while(1)
  31   1        {
  32   2          if(function_last!=function)//Èç¹ûÉÏ´ÎµÄ¹¦ÄÜÐòºÅÓëÕâ´ÎµÄ¶Ô²»ÉÏ£¬ËµÃ÷ÇÐ»»ÁË¹¦ÄÜÐòºÅ£¬ÐèÒªÍ£Ö¹ÉÏ´ÎÐ¡³µÓàÁôµ
             -Ä×´Ì¬
  33   2          {
  34   3            Stop();
  35   3            ultrasonic_switch=0;//³¬Éù²¨À×´ï¿ª¹Ø±êÖ¾Î»
  36   3            function_last=function;   
  37   3          }
  38   2          switch(function)
  39   2          {
  40   3            case 1://ºìÍâ±ÚÕÏ
  41   3            {
  42   4              Avoid();//ºìÍâ±ÚÕÏº¯Êý
  43   4            }break;
  44   3            
  45   3            case 2://Ñ­¼£
  46   3            {
  47   4              Track();//Ñ­¼£º¯Êý
  48   4            }break;
  49   3            
  50   3            case 3://³¬Éù²¨±ÚÕÏ
  51   3            {
  52   4              Ultra_Avo();//³¬Éù²¨±ÚÕÏº¯Êý
  53   4            }break;
C51 COMPILER V9.54   MAIN                                                                  05/08/2017 15:45:57 PAGE 2   

  54   3            
  55   3            case 4://´®¿Ú¿ØÖÆ
  56   3            {
  57   4              if(usart_switch)
  58   4              {
  59   5                PWML=PWMR=1;
  60   5                switch(usart_data[1])
  61   5                {
  62   6                  case 0x00://·½Ïò¿ØÖÆ
  63   6                  {
  64   7                    switch(usart_data[2])
  65   7                    {
  66   8                      case 0x00:Stop();break;
  67   8                      case 0x01:Forward();break;
  68   8                      case 0x02:Back();break;
  69   8                      case 0x03:Left();break;
  70   8                      case 0x04:Right();break;
  71   8                      default :break;
  72   8                    }
  73   7                  }break;
  74   6                  
  75   6                  case 0x01://Ì½ÕÕµÆ
  76   6                  {
  77   7                    switch(usart_data[2])
  78   7                    {
  79   8                      case 0x00:break;
  80   8                      case 0x01:break;
  81   8                      default :break;
  82   8                    }
  83   7                  }break;
  84   6                  
  85   6                  case 0x02://À®°È
  86   6                  {
  87   7                    switch(usart_data[2])
  88   7                    {
  89   8                      case 0x00:BZ=1;break;
  90   8                      case 0x01:BZ=0;break;
  91   8                      default :break;
  92   8                    }
  93   7                  }break;
  94   6                  
  95   6                  case 0x03:
  96   6                  {
  97   7                    switch(usart_data[2])
  98   7                    {
  99   8                      case 0x00:break;
 100   8                      case 0x01:break;
 101   8                      default :break;
 102   8                    }
 103   7                  }break;
 104   6                  
 105   6                  
 106   6                  case 0x04://À×´ïÉ¨Ãè
 107   6                  {
 108   7                    switch(usart_data[2])
 109   7                    {
 110   8                      case 0x00:ultrasonic_switch=0;break;
 111   8                      case 0x01:ultrasonic_switch=1;break;
 112   8                      default :break;
 113   8                    }
 114   7                  }break;
 115   6                  
C51 COMPILER V9.54   MAIN                                                                  05/08/2017 15:45:57 PAGE 3   

 116   6                  case 0x05://µç»úPWM
 117   6                  {
 118   7                    
 119   7                  }break;
 120   6                  
 121   6                  case 0x06://¶æ»úX
 122   6                  {
 123   7                    pwmx=(usart_data[2]*256)+usart_data[3];
 124   7                  }break;
 125   6                  
 126   6                  
 127   6                  case 0x07://¶æ»úY
 128   6                  {
 129   7                    pwmy=(usart_data[2]*256)+usart_data[3];
 130   7                  }break;
 131   6          
 132   6                  default :break;
 133   6                }
 134   5                usart_switch=0;//´®¿ÚÊý×é½ÓÊÕÍê³É±êÖ¾Î»ÇåÁã
 135   5              }
 136   4            }break;
 137   3            
 138   3            default :break;
 139   3          }
 140   2          /*³¬Éù²¨*/  
 141   2          if(ultrasonic_switch)
 142   2          {
 143   3            Radar();
 144   3          }
 145   2          else if(function!=3)
 146   2          {
 147   3            pwmc=64550;
 148   3          }
 149   2        }
 150   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    262    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
